function w(i="",c=""){const o=[],e=n=>String(n||"").trim(),l=e(i).split(/\r?\n|;|\.|\u2022|\-/).map(n=>n.trim()).filter(n=>n.length>0),m=n=>{const t=String(n||"").toLowerCase(),s=t.match(/(\d+)\s*x\s*(ao\s*dia|dia)/)||t.match(/(\d+)\s*vez(?:es)?\s*(ao\s*dia|dia)/)||t.match(/(\d+)\/(\d+)\s*h/)||t.match(/a\s*cada\s*(\d+)\s*h/)||t.match(/(\d+)\s*h\/(\d+)\s*h/)||t.match(/(\d+)\s*h/);if(s){if(s[2]&&/dia/.test(s[2]))return`${s[1]}x/dia`;if(s[1]&&s[2])return`${s[1]}/${s[2]}h`;if(s[1])return`a cada ${s[1]}h`}},u=n=>{const t=String(n||"").toLowerCase(),s=t.match(/por\s*(\d+)\s*dias?/)||t.match(/durante\s*(\d+)\s*dias?/)||t.match(/por\s*(\d+)\s*semanas?/)||t.match(/por\s*(\d+)\s*meses?/)||t.match(/por\s*(\d+)\s*h/);if(!s)return;const r=s[1];if(/dia/.test(s[0]))return`${r} dias`;if(/semana/.test(s[0]))return`${r} semanas`;if(/mes/.test(s[0]))return`${r} meses`;if(/h/.test(s[0]))return`${r} horas`},h=n=>{const t=String(n||"").toLowerCase(),s=t.match(/(\d+)\s*(comprimidos?|cp?s?)/)||t.match(/(\d+)\s*(capsulas?|c[aá]psulas?)/)||t.match(/(\d+)\s*ml/)||t.match(/(\d+)\s*mg/)||t.match(/(\d+)\s*g/)||t.match(/(\d+)\s*gatas?|gotas?/);if(s)return`${s[1]} ${s[2]?s[2]:t.includes("ml")?"ml":t.includes("mg")?"mg":t.includes("g")?"g":""}`.trim()},g=n=>{var a;const t=String(n||"").trim(),s=t.match(/^([A-Za-zÀ-ÿ0-9\-\s]+?)(?:\s+(\d+\s*(mg|ml|g)))?/);if(!s)return{descricao:t};const r=s[1].trim(),d=(a=s[2])==null?void 0:a.trim();return{descricao:r,concentracao:d}},p=m(c),$=u(c),b=h(c);for(const n of l){const{descricao:t,concentracao:s}=g(n),r=h(n)||b,d=m(n)||p,a=u(n)||$,F=[r,d,a].filter(Boolean).join(" ")||e(c),f={descricao:t,dose:r,frequencia:d,duracao:a,posologia:F,observacoes:void 0};s&&(f.concentracao=s),o.push(f)}return o.length===0&&e(c)&&o.push({descricao:e(i),posologia:e(c)}),o}export{w as parsePrescriptionToItems};
